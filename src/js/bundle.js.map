{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/ts/index.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","customElements","define","HTMLElement","[object Object]","super","this","_mask","_correctNumber","_inputsMaskArr","template","document","createElement","innerHTML","attachShadow","shadowRoot","_numberSection","querySelector","_errorSection","console","log","id","length","cell","className","innerText","appendChild","String","placeholder","push","style","fontSize","inputsArr","inputsCol","input","getElementById","rg","RegExp","addEventListener","test","Number","nextInput","focus","parseInt","isNaN","event","keyCode","errCheck","textContent","setMask","prop","logic","getMask","a"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","interface Props {\n    /**\n     * Маска инпута. Значения:\n     * \"I\" - одиночный инпут для ввода одной цифры\n     * \"X\" - серый блок с символом \"X\"\n     * \"*\" - серый блок с символом \"●\"\n     * <цифра> - серый блок с введенной цифрой\n     * <не цифра> - символ отображается \"как есть\"\n     */\n    _mask: string,\n}\n\nclass phoneValidationComponent extends HTMLElement{\n    \n    constructor() {\n        super();\n\n        this.attachShadow({mode: \"open\"});\n\n\n        if (this.shadowRoot) {\n            this.shadowRoot.innerHTML = this.template;\n\n            this._numberSection = this.shadowRoot.querySelector('.phone-module__number-section');\n            this._errorSection = this.shadowRoot.querySelector('.phone-module__error-section');\n        }\n    }\n\n    // Объявляем переенные\n    private _mask  = '';\n    private _correctNumber = '+7(985)077-**-**';\n    private _numberSection : any;\n    private _errorSection : any;\n    private _inputsMaskArr : Array<number> = [];\n    private _root : any;\n\n    // Задаем шаблон, в который будет помещен валидируемый номер\n    private template = document.createElement('template').innerHTML = `\n        <div class=\"phone-module\">\n            <div class=\"phone-module__number-section\"></div>\n            <div class=\"phone-module__error-section\"></div>\n        </div>\n    `;\n\n    public logic() : void {\n\n        console.log('step 2');\n\n        if (this.shadowRoot) {\n            this._numberSection = this.shadowRoot.querySelector('.phone-module__number-section');\n            this._errorSection = this.shadowRoot.querySelector('.phone-module__error-section');\n        }\n\n        if (this._numberSection) {\n            let id = 1;\n    \n            console.log('step 3');\n\n            for (let i = 0; i < this._mask.length; i++) {\n                switch(this._mask[i]) {\n                    case '+': \n                    case '(':\n                    case ')':\n                    case '-': {\n                        let cell = document.createElement('div');\n                        cell.className = 'phone-module__number-section-symbol';\n                        cell.innerText = this._mask[i];\n                        this._numberSection.appendChild(cell);\n                        break;\n                    }\n                    case 'I': {\n                        let cell = document.createElement('input');\n                        cell.className = 'phone-module__number-section-input';\n                        cell.id = String(id);\n                        cell.placeholder = '_';\n                        this._numberSection.appendChild(cell);\n                        this._inputsMaskArr.push(i);\n                        id++;\n                        break;            \n                    }\n                    case '*': {\n                        let cell = document.createElement('div');\n                        cell.className = 'phone-module__number-section-cell';\n                        cell.innerText = '•';\n                        cell.style.fontSize = '25px';\n                        this._numberSection.appendChild(cell);\n                        break;\n                    }\n                    case 'X': {\n                        let cell = document.createElement('div');\n                        cell.className = 'phone-module__number-section-cell';\n                        cell.innerText = this._mask[i];\n                        this._numberSection.appendChild(cell);\n                        break;\n                    }\n                    default: {\n                        let cell = document.createElement('div');\n                        cell.className = 'phone-module__number-section-cell';\n                        cell.innerText = this._mask[i];\n                        this._numberSection.appendChild(cell);\n                        break;\n                    }\n                }\n            }\n        \n            let inputsArr : Array<HTMLInputElement> = [];\n            let inputsCol = id;\n    \n            for (let i = 1; i <= id; i++) {\n                let input = <HTMLInputElement>document.getElementById(String(i));\n                if (input){\n                    inputsArr.push(input);\n                }\n            }\n            let rg : RegExp = new RegExp('^[0-9]+$');\n        \n            console.log(this._mask)\n\n            for (let i  = 0; i < inputsArr.length; i++) {\n                inputsArr[i].addEventListener('input', () => {\n                    \n                    inputsArr[i].className = 'phone-module__number-section-input'; \n                    \n                    if (rg.test(inputsArr[i].value)) {\n                        if (inputsArr[i].value.length > 1) {\n                            inputsArr[i].value = inputsArr[i].value[inputsArr[i].value.length-1];\n                        }\n        \n                        if ((Number(inputsArr[i].id)) < inputsCol) {\n                            let nextInput : HTMLInputElement = <HTMLInputElement>document.getElementById(String(Number(inputsArr[i].id) + 1));\n                            \n                            if (nextInput) {\n                                nextInput.focus();\n                            }\n                        }\n            \n                        if (inputsArr[i].className == 'phone-module__number-section-input-error') {\n                            inputsArr[i].className = 'phone-module__number-section-input';\n                        }\n                    } else {\n                        console.log(inputsArr[i].value, parseInt(inputsArr[i].value));\n                        if (inputsArr[i].value.length >= 2) {\n                            if (!isNaN(Number(inputsArr[i].value))) {\n                                console.log('da')\n                                inputsArr[i].value = inputsArr[i].value[0];\n                            } else {\n                                console.log(inputsArr[i].value)\n                                inputsArr[i].value = inputsArr[i].value[1];\n                            }\n                        } else {\n                            inputsArr[i].value = '';\n                        }\n                    }\n                });\n            }\n        \n            document.addEventListener('keypress', (event) => {\n                if (event.keyCode == 13) {\n                    let errCheck = false;\n                    if (this._errorSection) {\n                        this._errorSection.textContent = '';\n        \n                        for (let i = 0; i < inputsCol; i++) {\n                            let input : HTMLInputElement = <HTMLInputElement>document.getElementById(String(i + 1))\n            \n                            if (input) {\n                                if (input.value == '') {\n                                    this._errorSection.textContent = 'Все поля должны быть заполены';\n                                    input.className = 'phone-module__number-section-input-error';\n                                    return;\n                                }\n                                if (input.value != this._correctNumber[this._inputsMaskArr[i]]) {\n                \n                                    console.log(input, 'cur: ', input.value, 'ist: ', this._correctNumber[this._inputsMaskArr[i]])\n                \n                                    errCheck = true;\n                                }\n                            }\n                        }   \n            \n                        let input: HTMLElement;\n            \n                        if (errCheck) {\n                            for (let i = 0; i < inputsCol; i++) {\n                                input = <HTMLElement>document.getElementById(String(i + 1));\n            \n                                if (input) {\n                                    input.className = 'phone-module__number-section-input-error';\n                                }\n                            }\n                            this._errorSection.textContent = 'Неверный номер, попробуйте еще раз';\n                        } else { \n                            for (let i = 0; i < inputsCol; i++) {\n                                input = <HTMLElement>document.getElementById(String(i + 1));\n            \n                                if (input) {\n                                    input.className = 'phone-module__error-section-input-success';\n                                }\n                            }\n                        }\n                    }\n                    }\n            });\n        } else {\n            console.log(\"root\", this.shadowRoot, \"elem\", this._numberSection);\n        }\n    }\n\n    set setMask(prop : Props) {\n        this._mask = prop._mask;\n        console.log(\"step1\");\n        this.logic();\n    }\n\n    get getMask() : string {\n        return this._mask;\n    }\n}\ncustomElements.define(\"phone-validation\", phoneValidationComponent);\nvar a  = <phoneValidationComponent>document.getElementById('7');\nif (a) {\n    let p : Props = {\n        _mask : '+7(985)0II-**-**'\n    }\n    a.setMask = p;\n\n    console.log('wtf')\n\n    // a.render();\n} else {\n    console.log('err')\n}\n\n\n\n\n\n\n\n\n"],"sourceRoot":""}